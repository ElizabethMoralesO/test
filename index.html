<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workflow Trigger - GitHub Pages</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f6f8fa;
            color: #24292f;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #0969da;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #656d76;
            margin-bottom: 40px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        input[type="text"], select, textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d0d7de;
            border-radius: 6px;
            font-size: 14px;
            box-sizing: border-box;
        }
        textarea {
            resize: vertical;
            min-height: 80px;
        }
        .btn {
            background-color: #2da44e;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: background-color 0.2s;
            width: 100%;
            margin-top: 10px;
        }
        .btn:hover {
            background-color: #2c974b;
        }
        .btn:disabled {
            background-color: #94d3a2;
            cursor: not-allowed;
        }
        .status {
            margin-top: 20px;
            padding: 12px;
            border-radius: 6px;
            display: none;
        }
        .status.success {
            background-color: #dafbe1;
            color: #0969da;
            border: 1px solid #2da44e;
        }
        .status.error {
            background-color: #ffebe9;
            color: #cf222e;
            border: 1px solid #ff818266;
        }
        .info-box {
            background-color: #ddf4ff;
            border: 1px solid #54aeff66;
            border-radius: 6px;
            padding: 16px;
            margin-bottom: 30px;
        }

        .links {
            margin-top: 30px;
            text-align: center;
        }
        .links a {
            color: #0969da;
            text-decoration: none;
            margin: 0 10px;
        }
        .links a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Workflow Trigger</h1>
        <p class="subtitle">Trigger GitHub Actions workflows from your browser</p>
        
        <div class="info-box">
            <strong>üöÄ Simple Workflow Trigger</strong><br>
            This page helps you trigger the "Dummy Workflow" via GitHub Actions. No authentication required!
            Simply fill out the form below and you'll be directed to GitHub Actions to run the workflow.
            <br><br>
            <strong>Repository:</strong> <span id="repo-name">ElizabethMoralesO/test</span><br>
            <small style="color: #666;">Version: 2024-10-24 | Method: GitHub Actions Redirect</small>
        </div>

        <!-- Workflow Form -->
        <form id="triggerForm">
            <h3>üéØ Trigger Workflow</h3>

            <div class="form-group">
                <label for="message">Custom Message:</label>
                <textarea id="message" name="message" placeholder="Enter a custom message for the workflow...">Hello from GitHub Pages! üëã</textarea>
            </div>

            <div class="form-group">
                <label for="environment">Target Environment:</label>
                <select id="environment" name="environment">
                    <option value="development">Development</option>
                    <option value="staging">Staging</option>
                    <option value="production">Production</option>
                </select>
            </div>

            <button type="submit" class="btn" id="triggerBtn">
                üéØ Trigger Dummy Workflow
            </button>
        </form>

        <div id="status" class="status"></div>

        <div class="links">
            <a href="https://github.com/ElizabethMoralesO/test/actions" target="_blank">üìä View Workflow Runs</a>
            <a href="https://github.com/ElizabethMoralesO/test" target="_blank">üìÅ View Repository</a>
            <a href="https://github.com/ElizabethMoralesO/test/actions/workflows/dummy-workflow.yaml" target="_blank">‚öôÔ∏è View Workflow File</a>
        </div>
    </div>

    <script>
        const REPO_OWNER = 'ElizabethMoralesO';
        const REPO_NAME = 'test';
        const WEB_TRIGGER_WORKFLOW = 'web-trigger.yaml';

        // Setup event listeners
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('triggerForm').addEventListener('submit', handleWorkflowTrigger);
        });

        // Handle workflow trigger
        async function handleWorkflowTrigger(e) {
            e.preventDefault();
            
            const message = document.getElementById('message').value;
            const environment = document.getElementById('environment').value;
            const triggerBtn = document.getElementById('triggerBtn');
            
            // Reset status and disable button
            hideMessage();
            triggerBtn.disabled = true;
            triggerBtn.textContent = 'üîÑ Creating trigger request...';
            
            // Direct user to GitHub Actions page
            redirectToGitHubActions(message, environment);
            
            // Re-enable button
            triggerBtn.disabled = false;
            triggerBtn.textContent = 'üéØ Trigger Dummy Workflow';
        }

        // Direct user to GitHub Actions page to trigger workflow
        function redirectToGitHubActions(message, environment) {
            // Create the GitHub Actions trigger URL with pre-filled parameters
            const actionsUrl = `https://github.com/${REPO_OWNER}/${REPO_NAME}/actions/workflows/${WEB_TRIGGER_WORKFLOW}`;
            
            showMessage('success', `
                üéØ <strong>Ready to trigger workflow!</strong><br><br>
                <strong>Your settings:</strong><br>
                üìù Message: ${message}<br>
                üåç Environment: ${environment}<br><br>
                
                <a href="${actionsUrl}" target="_blank" class="btn" style="color: white; text-decoration: none; display: inline-block; margin: 10px 0;">
                    üöÄ Open GitHub Actions & Trigger Workflow
                </a><br>
                
                <small>
                <strong>Instructions:</strong><br>
                1. Click the button above to open GitHub Actions<br>
                2. Click "Run workflow" button<br>
                3. Enter your message: <code>${message}</code><br>
                4. Select environment: <code>${environment}</code><br>
                5. Click "Run workflow" to execute
                </small>
            `);
            
            // Auto-open GitHub Actions page
            setTimeout(() => {
                window.open(actionsUrl, '_blank');
            }, 2000);
        }

        // Utility functions
        function showMessage(type, message) {
            const statusDiv = document.getElementById('status');
            statusDiv.className = `status ${type}`;
            statusDiv.innerHTML = message;
            statusDiv.style.display = 'block';
        }

        function hideMessage() {
            const statusDiv = document.getElementById('status');
            statusDiv.style.display = 'none';
        }
    </script>
</body>
</html>