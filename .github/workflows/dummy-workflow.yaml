name: Dummy Workflow

on:
    # Allow manual trigger from GitHub UI
    workflow_dispatch:
        inputs:
            message:
                description: "Custom message for the workflow"
                required: false
                default: "Hello from GitHub Pages!"
                type: string
            environment:
                description: "Target environment"
                required: false
                default: "development"
                type: choice
                options:
                    - development
                    - staging
                    - production

    # Allow trigger from repository dispatch (for external triggers)
    repository_dispatch:
        types: [trigger-dummy-workflow]

jobs:
    dummy-job:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout repository
              uses: actions/checkout@v4

            - name: Display workflow inputs
              run: |
                  echo "ðŸŽ¯ Dummy Workflow Triggered!"
                  echo "ðŸ“ Message: ${{ github.event.inputs.message || github.event.client_payload.message || 'No message provided' }}"
                  echo "ðŸŒ Environment: ${{ github.event.inputs.environment || github.event.client_payload.environment || 'development' }}"
                  echo "ðŸ”§ Triggered by: ${{ github.event_name }}"
                  echo "ðŸ‘¤ Actor: ${{ github.actor }}"
                  echo "ðŸ“… Timestamp: $(date)"

            - name: Simulate some work
              run: |
                  echo "ðŸ”„ Starting dummy work..."
                  sleep 5
                  echo "âœ… Dummy work completed successfully!"

            - name: Generate random number
              id: random
              run: |
                  RANDOM_NUM=$((RANDOM % 1000))
                  echo "ðŸŽ² Generated random number: $RANDOM_NUM"
                  echo "random_number=$RANDOM_NUM" >> $GITHUB_OUTPUT

            - name: Create artifact
              run: |
                  mkdir -p output
                  echo "Dummy workflow execution report" > output/report.txt
                  echo "Timestamp: $(date)" >> output/report.txt
                  echo "Random Number: ${{ steps.random.outputs.random_number }}" >> output/report.txt
                  echo "Message: ${{ github.event.inputs.message || github.event.client_payload.message || 'No message provided' }}" >> output/report.txt

            - name: Upload artifact
              uses: actions/upload-artifact@v4
              with:
                  name: dummy-workflow-report
                  path: output/report.txt

            - name: Summary
              run: |
                  echo "## ðŸŽ‰ Dummy Workflow Summary" >> $GITHUB_STEP_SUMMARY
                  echo "- **Status**: âœ… Completed Successfully" >> $GITHUB_STEP_SUMMARY
                  echo "- **Random Number**: ${{ steps.random.outputs.random_number }}" >> $GITHUB_STEP_SUMMARY
                  echo "- **Message**: ${{ github.event.inputs.message || github.event.client_payload.message || 'No message provided' }}" >> $GITHUB_STEP_SUMMARY
                  echo "- **Environment**: ${{ github.event.inputs.environment || github.event.client_payload.environment || 'development' }}" >> $GITHUB_STEP_SUMMARY
